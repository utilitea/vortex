<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vortex (Versão Definitiva)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="https://utilitea.github.io/vortex/vortex1.png" type="image/png">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
    :root {
        --bg-primary: #0A0B0F; --bg-secondary: #101218; --panel: #1A1D28;
        --accent-green: #14d07b; --accent-purple: #9f50ff; --text-primary: #EAEAEA;
        --text-muted: #8899A6; --border-color: rgba(255, 255, 255, 0.08);
        --shadow-color-glow: rgba(20, 208, 123, 0.3); --card-radius: 16px;
        --gap: 20px; --max-width: 1440px; --header-height: 70px;
    }

/* ===== ESTILO DA BARRA DE ROLAGEM MODERNA ===== */
/* Aplica-se a navegadores baseados em WebKit (Chrome, Safari, Edge, Opera, etc.) */

/* A barra de rolagem inteira (vertical e horizontal) */
::-webkit-scrollbar {
    width: 12px;  /* Largura da barra vertical */
    height: 12px; /* Altura da barra horizontal */
}

/* A trilha (o fundo da barra) */
::-webkit-scrollbar-track {
    background: var(--bg-secondary); /* Um fundo escuro que combina com a página */
    border-radius: 10px;
}

/* O polegar (a parte que se move) */
::-webkit-scrollbar-thumb {
    background: linear-gradient(45deg, var(--accent-purple), var(--accent-green));
    border-radius: 10px;
    border: 3px solid var(--bg-secondary); /* Cria um efeito de "flutuação" */
}

/* Efeito ao passar o mouse sobre o polegar */
::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(45deg, #b37eff, #1aff9c); /* Versão mais clara do gradiente */
}

    *, *:before, *:after { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; font-family: 'Poppins', Segoe UI, Roboto, Arial, sans-serif; background-color: var(--bg-primary); color: var(--text-primary); }
    .wrap { max-width: var(--max-width); margin: 0 auto; padding: var(--gap); padding-top: calc(var(--header-height) + var(--gap)); }
    .topbar { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; height: var(--header-height); padding: 0 var(--gap); display: flex; align-items: center; gap: var(--gap); background: rgba(10, 11, 15, 0.5); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border-color); }
    .logo { display: flex; align-items: center; gap: 12px; }
    .logo img { height: 40px; width: 40px; }
    .logo h1 { font-size: 24px; font-weight: 700; }
    .search-container { flex: 1; margin-left: auto; max-width: 400px; position: relative; }
    #searchInput { width: 100%; padding: 12px 18px; border-radius: 25px; border: 1px solid var(--border-color); background: var(--panel); color: var(--text-primary); font-size: 15px; outline: none; transition: all 0.3s ease; }
    #searchInput:focus, #searchInput:focus-visible { border-color: var(--accent-green); box-shadow: 0 0 15px var(--shadow-color-glow); outline: none; }
    .hero-section { height: 35vh; min-height: 300px; margin-bottom: calc(var(--gap) * 2); border-radius: var(--card-radius); overflow: hidden; position: relative; display: flex; align-items: flex-end; padding: calc(var(--gap) * 1.5); background-size: cover; background-position: center; cursor: pointer; border: 1px solid transparent; transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease; }
/* Tente estes novos valores */
.filter-nav {
    display: flex;
    gap: 10px;
    overflow-x: auto; 
    overflow-y: visible;
    padding-top: 15px;      /* <-- Aumentamos de 10px para 15px */
    padding-bottom: 20px;   /* <-- Aumentamos de 15px para 20px */
    margin-bottom: calc(var(--gap) + 15px); /* <-- Também aumentamos aqui para consistência */
    padding-left: 10px;  /* <-- Adiciona um respiro na esquerda */
    padding-right: 10px; /* <-- Adiciona um respiro na direita */
}    
    .filter-btn { position: relative; padding: 8px 20px; border: 1px solid var(--border-color); background: transparent; color: var(--text-muted); border-radius: 20px; cursor: pointer; transition: all 0.2s ease; white-space: nowrap; }
    .filter-btn:hover { color: var(--text-primary); border-color: var(--text-muted); }
.filter-btn:focus-visible { transform: translateY(-5px) scale(1.05); z-index: 10; }
    .filter-btn.active { background: var(--accent-green); border-color: var(--accent-green); color: var(--bg-primary); font-weight: 600; }

/* Adicione este bloco ao seu CSS principal */

/* Melhora o destaque do botão de filtro ativo e focado */
.filter-btn:focus-visible,
.filter-btn.active {
    border-color: var(--accent-green);
    box-shadow: 0 0 15px var(--shadow-color-glow);
    outline: none; /* Remove o outline padrão do navegador para usar o nosso efeito */
}

    .carousel { margin-bottom: calc(var(--gap) * 2); }
    .section-title { font-size: 1.5rem; font-weight: 600; margin-bottom: var(--gap); padding-left: 10px; border-left: 3px solid var(--accent-purple); }
.carousel .wrap-row {
    display: flex;
    gap: var(--gap);
    overflow-x: auto;
    padding-bottom: var(--gap);
    padding-top: 25px; /* <-- ADICIONE APENAS ESTA LINHA */
    padding-left: 10px;  /* <-- Adiciona um respiro na esquerda */
    padding-right: 10px; /* <-- Adiciona um respiro na direita */
}
    .channel-card { position: relative; min-width: 160px; border-radius: var(--card-radius); border: 1px solid var(--border-color); background: var(--bg-secondary); cursor: pointer; overflow: hidden; transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease; }
.channel-card:hover, .channel-card:focus-visible,
.hero-section:hover, .hero-section:focus-visible {
    transform: translateY(-8px) scale(1.04);
    /* A MÁGICA ESTÁ AQUI:
       Adicionamos a "sombra interna" (inset) que simula a borda,
       junto com as sombras externas que já existiam.
    */
    box-shadow: inset 0 0 0 2px var(--accent-green), 0 0 25px var(--shadow-color-glow), 0 20px 40px rgba(0, 0, 0, 0.4);
    z-index: 10;
    outline: none; /* Remove o outline padrão para deixar só nosso efeito */
}
    .channel-thumb { width: 100%; height: 135px; display: flex; align-items: center; justify-content: center; background: #000; }
    .channel-thumb img { width: 100%; height: 100%; object-fit: contain; }
    .channel-info { padding: 16px; }
    .channel-name { font-size: 1.1rem; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .hidden { display: none !important; }
    .no-results { text-align: center; padding: 80px; color: var(--text-muted); }
    .player-modal { display: none; position: fixed; inset: 0; background: #000; z-index: 2000; align-items: center; justify-content: center; }
    .player-modal.open { display: flex; }
    .player-box { width: 100%; height: 100%; position: relative; }
    .viewer { width: 100%; height: 100%; }
    .viewer video { width: 100%; height: 100%; }
    .player-controls { position: absolute; top: 0; left: 0; right: 0; padding: var(--gap); display: flex; justify-content: space-between; align-items: center; background: linear-gradient(180deg, rgba(0,0,0,0.7) 0%, transparent 100%); }
    .player-title { font-size: 1.5rem; font-weight: 600; }
    .close-player-btn { background: rgba(255,255,255,0.1); border: 1px solid var(--border-color); color: var(--text-primary); cursor: pointer; padding: 8px 16px; border-radius: 8px; }
    .player-actions { display: flex; gap: 10px; }
    .channel-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 20px 0; background: linear-gradient(0deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 50%, transparent 100%); opacity: 0; transform: translateY(100%); transition: opacity 0.3s ease, transform 0.3s ease; pointer-events: none; }
    .channel-overlay.visible { opacity: 1; transform: translateY(0); pointer-events: auto; }
    .channel-list-container { overflow-x: auto; overflow-y: hidden; padding: 10px 30px; scrollbar-color: var(--accent-green) transparent; scrollbar-width: thin; }
    .channel-list-container::-webkit-scrollbar { height: 8px; }
    .channel-list-container::-webkit-scrollbar-thumb { background: var(--panel); border-radius: 10px; }
    .channel-list-container::-webkit-scrollbar-thumb:hover { background: var(--accent-green); }
    .channel-list { display: flex; gap: 15px; }
    .overlay-card { flex: 0 0 180px; border-radius: 8px; background: rgba(255, 255, 255, 0.05); border: 2px solid transparent; cursor: pointer; transition: all 0.2s ease-out; text-align: center; }
    .overlay-card img { width: 100%; height: 100px; object-fit: contain; padding: 5px; border-radius: 6px; pointer-events: none; }
    .overlay-card .name { font-size: 14px; padding: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--text-muted); pointer-events: none; }
    .overlay-card:hover, .overlay-card:focus-visible, .overlay-card.active { border-color: var(--accent-green); background: rgba(20, 208, 123, 0.1); transform: scale(1.05); outline: none; }
    .overlay-card.active .name { color: var(--text-primary); font-weight: 600; }


/* Adicione esta media query no final do seu CSS */
@media (max-width: 768px) {
    .hero-section {
        min-height: 100px; /* Reduz a altura mínima em telas menores */
        padding: var(--gap);   /* Reduz o espaçamento interno */
    }
}
.channel-card {
    min-width: 100px; /* Reduz a largura mínima do card */
}
.channel-thumb {
    height: 80px; /* Reduz a altura da imagem para manter a proporção */
}
.channel-name {
    font-size: 1rem; /* Diminui um pouco a fonte do título */
}

/* Adicione este CSS para o vídeo do hero */
.hero-section video {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    object-fit: cover; /* Garante que o vídeo cubra todo o espaço */
    transform: translate(-50%, -50%);
    z-index: 1; /* Joga o vídeo para trás do conteúdo */
}

.hero-content {
    position: relative; /* Necessário para o z-index funcionar */
    z-index: 2; /* Garante que o conteúdo fique na frente do vídeo */
    width: 100%; /* Opcional, mas ajuda no alinhamento */
}

</style>
</head>
<body>
    <header class="topbar">
        <div class="logo">
            <img src="https://utilitea.github.io/vortex/vortex.png" alt="Vortex Logo">
            <h1>Vortex</h1>
        </div>
        <div class="search-container">
            <input id="searchInput" type="text" placeholder="Buscar canais...">
        </div>
    </header>
    <main class="wrap">
        <section id="hero-section" class="hero-section" aria-label="Canal em destaque"></section>
        <nav id="filter-nav" class="filter-nav" aria-label="Filtro de categorias"></nav>
        <div id="mainContent"></div>
        <div id="noResults" class="no-results hidden">
            <h3>Nenhum canal encontrado</h3>
            <p>Tente buscar por outro termo ou selecione outra categoria.</p>
        </div>
    </main>
    <div id="playerModal" class="player-modal" aria-hidden="true" role="dialog">
        <div class="player-box">
            <div class="viewer">
                <video id="videoPlayer" playsinline autoplay></video>
                <div class="player-controls">
                    <h3 id="playerTitle" class="player-title">Carregando...</h3>
                    <div class="player-actions">
                        <button id="pipButton" class="close-player-btn" title="Picture-in-Picture">PiP</button>
                        <button id="closePlayer" class="close-player-btn">Fechar</button>
                    </div>
                </div>
                <div id="channelOverlay" class="channel-overlay">
                    <div class="channel-list-container">
                        <div id="channelList" class="channel-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script>
const channelsData = {
    // Seus dados de canais completos aqui...
    "Tv Aberta": [ { "title": "SBT", "src": "https://stream.amsolution.net.br:8443/live/66db1cf131d45/index.m3u8", "thumbnail": "https://upload.wikimedia.org/wikipedia/pt/thumb/4/41/Logotipo_do_SBT.svg/1200px-Logotipo_do_SBT.svg.png" }, { "title": "SBT", "src": "https://video09.logicahost.com.br/sbtmutum/sbtmutum/playlist.m3u8", "thumbnail": "https://upload.wikimedia.org/wikipedia/commons/2/29/Logotipo_TV_MUTUM.png" }, { "title": "SBT", "src": "https://stream.amsolution.net.br:8443/live/66db1cf131d45/index.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-difusora.webp" }, { "title": "Record", "src": "https://video08.logicahost.com.br/portaldatropical02/portaldatropical02/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-tropical.webp" }, { "title": "Record", "src": "https://cdn.live.br1.jmvstream.com/w/LVW-10841/LVW10841_mT77z9o2cP/playlist.m3u8", "thumbnail": "https://tvconquista.com.br/wp-content/uploads/2020/01/LOGO-TV-CONQUISTA-FONTE-ESCURA-2048x1697.png" }, { "title": "Record", "src": "https://tv03.zas.media:1936/rftv/rftv/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/rede-familia.webp" }, { "title": "Rede Tv", "src": "https://video04.logicahost.com.br/tvpampa/tvpampa/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-pampa.webp" }, { "title": "Rede TV", "src": "https://tv01.zas.media:1936/redetvparana/redetvparana/playlist.m3u8", "thumbnail": "https://redeitv.online/roku/imgcanais/cana-rede-tv.png?alt=media&token=cc279d94-72ac-4523-8227-1d9b96a9df58" }, { "title": "Band", "src": "https://5b7f3c45ab7c2.streamlock.net/arapuan/ngrp:arapuan_all/playlist.m3u8", "thumbnail": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Rede_Bandeirantes_logo_2018.svg/800px-Rede_Bandeirantes_logo_2018.svg.png" }, { "title": "Band", "src": "https://cdn.live.br1.jmvstream.com/w/LVW-15748/LVW15748_Yed7yzLuRC/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/rbatv.webp" }, { "title": "Band", "src": "https://5b7f3c45ab7c2.streamlock.net/arapuan/ngrp:arapuan_all/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-arapuan.webp" }, { "title": "Paraná Turismo", "src": "https://aovivo.paranaeducativa.pr.gov.br/hls/tve.m3u8", "thumbnail": "https://s3minio.webativa.com.br/redeitv/thumb-tv-parana-turismo.png" }, { "title": "Tv Meio", "src": "https://isaocorp.cloudecast.com/redemeio/index.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/meio-norte-tv.webp" }, { "title": "Amazon Sat", "src": "https://amazonsat.brasilstream.com.br/hls/amazonsat/index.m3u8", "thumbnail": "https://upload.wikimedia.org/wikipedia/pt/7/74/Logotipo_de_2024_do_Amazon_Sat.png" }, { "title": "TV Alternativa", "src": "https://stmv5.samcast.com.br/wagner7919/wagner7919/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-alternativa.webp" }, { "title": "Cabo Frio TV", "src": "https://video05.logicahost.com.br/ararutv/ararutv/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/cabo-frio-tv.webp" } ],
    "Filmes": [ { "title": "Runtime", "src": "https://run-rt-br.otteravision.com/run/rt_br/rt_br_720p_high.m3u8", "thumbnail": "https://img3.static-ottera.com/prod/run/linear_channel/thumbnails/poster/366x206/runtime_brazil_1400x2000_0.jpg" }, { "title": "Ação", "src": "https://run-rt-ra.otteravision.com/run/rt_ra/rt_ra_720.m3u8", "thumbnail": "https://img2.static-ottera.com/prod/run/linear_channel/thumbnails/widescreen/366x206/runtime_br_action_bg.jpg" }, { "title": "Comédia", "src": "https://run-rc-br.otteravision.com/run/rc_br/rc_br_720.m3u8", "thumbnail": "https://img3.static-ottera.com/prod/run/linear_channel/thumbnails/poster/366x206/runtime_comedy_brazil_1400x2000.jpg" }, { "title": "Família", "src": "https://run-rufb.otteravision.com/run/rufb/rufb.m3u8", "thumbnail": "https://i.ytimg.com/vi/hJeqJsSxV8w/maxresdefault.jpg" }, { "title": "Crime", "src": "https://run-cr-br.otteravision.com/run/cr_br/cr_br_720.m3u8", "thumbnail": "https://img2.static-ottera.com/prod/run/linear_channel/thumbnails/poster/960x540/runtime_crime_brazil_1400x2000.jpg" }, { "title": "Moviesphere", "src": "https://amg00353-amg00353c29-plex-us-3205.playouts.now.amagi.tv/1080p-cc/index.m3u8", "thumbnail": "https://deadline.com/wp-content/uploads/2024/06/MovieSphere.jpg?w=681&h=383&crop=1" }, { "title": "Moviesphere II", "src": "https://stream.ads.ottera.tv/playlist.m3u8?network_id=6178", "thumbnail": "https://img.static-ottera.com/prod/run/linear_channel/thumbnails/widescreen/logo_1.jpg" }, { "title": "Sony One", "src": "https://spt-sonyoneclassicas-1-br.samsung.wurl.tv/playlist.m3u8", "thumbnail": "https://cdn.techshake.com/imagens/sony-one-e-o-novo-canal-do-prime-video.jpg" }, { "title": "Sony One Emoções", "src": "https://spt-sonyoneemocoes-1-br.samsung.wurl.tv/playlist.m3u8", "thumbnail": "https://images.samsung.com/is/image/samsung/assets/br/tvs/smart-tv/channel-list/SONYEMOCOESType-B_-1x1-Circles-476x476AngelaSuarez.png?$ORIGIN_PNG$" }, { "title": "Sony One Cinema", "src": "https://spt-sonyoneclassicas-1-br.samsung.wurl.tv/playlist.m3u8", "thumbnail": "https://www.cxtv.com.br/img/Tvs/Logo/webp-l/bad404e3cd39c2d21e3bc053c44691ec.webp" }, { "title": "Nova Play", "src": "https://stmv1.srvstm.com/abc7891/abc7891/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-nova-play.webp" }, { "title": "Cindie Lite", "src": "https://cc-hqw8u5r1nshjc.akamaized.net/scheduler/scheduleMaster/352.m3u8", "thumbnail": "https://img.odcdn.com.br/wp-content/uploads/2025/04/cindie-5-1920x1080.jpg" }, { "title": "Channel 1", "src": "https://stmv1.srvif.com/movies1/movies1/playlist.m3u8", "thumbnail": "https://channel1.ipgotv.net.br/LOGO_CH1.png" }, { "title": "Urban Movies", "src": "https://iptv.vivatele.com/live/viva_padrao/viva2384/108.m3u8", "thumbnail": "https://urbantv.com.br/wp-content/uploads/2024/01/movies-serv-1170x658.jpg" }, { "title": "Urban Series", "src": "https://iptv.vivatele.com/live/viva_padrao/viva2384/110.m3u8", "thumbnail": "https://urban.tv.br/canais/logo-urbanseries.jpg" } ],
    "WebTv": [ { "title": "Caravana Play", "src": "https://stmv2.voxtvhd.com.br/keynni6990/keynni6990/playlist.m3u8", "thumbnail": "https://caravanaplay.com.br/admin/assets/img/logo.png" }, { "title": "Canal 29", "src": "https://stmv1.srvif.com/canal29/canal29/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/canal-29.webp" }, { "title": "Tv Sonata", "src": "https://video04.logicahost.com.br/isonata/isonata/playlist.m3u8", "thumbnail": "https://tvsonata.com.br/storage/690/config/YIpr9GvubiZ14KntfgXqTob4kMpue1cFo2R5h91h.png" }, { "title": "Xtreme Tv", "src": "https://stmv1.srvif.com/xtremetv/xtremetv/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/webtv-xtreme.webp" }, { "title": "GLN Tv", "src": "https://stmv8.samcast.com.br/glnfilmes/glnfilmes/playlist.m3u8", "thumbnail": "https://www.glntv.com.br/admin/assets/img/logo.png" }, { "title": "Chroma Tv", "src": "https://5c483b9d1019c.streamlock.net/8054/8054/playlist.m3u8", "thumbnail": "https://pa-str.srvsite.com/arquivos/7197/cabecalho-7197-20240825174302.png" }, { "title": "TV da Pesca", "src": "https://isaocorp.cloudecast.com/tvdapesca/index.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-da-pesca.webp" }, { "title": "Tv Channel Network", "src": "https://tvchannel.tvr.ovh/video28392/video28392/playlist.m3u8", "thumbnail": "https://static.wixstatic.com/media/ac52cc_bf31c5de74a344708282bd3d55fc7464~mv2.png" }, { "title": "Reviva TV", "src": "https://stmv.webtvninjas.com.br/webtvni1/webtvni1/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/reviva-tv.webp" }, { "title": "TVitapê", "src": "https://stream01.msolutionbrasil.com.br/hls/tvitape/live.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tvitape.webp" }, { "title": "TV Ondas Play", "src": "https://stmv5.samcast.com.br/portalondasdemarica/portalondasdemarica/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-ondas-play.webp" } ],
    "Variedades": [ { "title": "Master Chefe", "src": "https://amg00627-amg00627c9-runtime-latam-2613.playouts.now.amagi.tv/playlist/amg00627-banijayfast-masterchefbrazil-runtimelatam/playlist.m3u8", "thumbnail": "https://img3.static-ottera.com/prod/run/linear_channel/thumbnails/widescreen/366x206/runtime_masterchefbrasil_logo_1920x1080_-_suraj_s.jpg" }, { "title": "Cultne TV", "src": "https://edge-fast3.evrideo.tv/231ed5ca-94a1-466e-94fd-4cf831fcdd2f_1000027150_HLS/manifest.m3u8", "thumbnail": "https://cultne.tv/site/img/logo_cultnetv-1200x627.png" }, { "title": "UOL", "src": "https://video01.soultv.com.br/uoltv/uoltv/playlist.m3u8", "thumbnail": "https://conteudo.imguol.com.br/c/play/logo_canaluol_2024.svg" }, { "title": "ypêtv", "src": "https://video09.logicahost.com.br/yptvoficioal/yptvoficioal/playlist.m3u8", "thumbnail": "https://ypetv.com.br/wp-content/uploads/2024/08/LOGO-HORIZONTAL-YPE-TV.png" }, { "title": "Tv Caravelas", "src": "https://video09.logicahost.com.br/tvcaravelas/tvcaravelas/playlist.m3u8", "thumbnail": "https://pa-str.srvsite.com/arquivos/4506/cabecalho-4506-20190507094833.png" }, { "title": "Tv Tudo", "src": "https://tv02.zas.media:1936/tvtudo/tvtudo/playlist.m3u8", "thumbnail": "https://www.tvtudo.tv.br/wp-content/uploads/sites/34/2022/12/logo.png" }, { "title": "Tv Metropolitana", "src": "https://stmv5.samcast.com.br/claudio8701/claudio8701/playlist.m3u8", "thumbnail": "https://pa-str.srvsite.com/arquivos/7258/cabecalho-7258-20240527153716.png" }, { "title": "Tv Carioca Internacional", "src": "https://video04.logicahost.com.br/cariocainternacional/cariocainternacional/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-carioca.webp" }, { "title": "TV MAX", "src": "https://video09.logicahost.com.br/tvmax/tvmax/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-max-rio.webp" }, { "title": "Rede Tv Mais", "src": "https://video09.logicahost.com.br/redetvmais/redetvmais/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/rede-tv-mais.webp" }, { "title": "Tv Mega Brasil", "src": "https://video01.kshost.com.br/sergio7305/sergio7305/playlist.m3u8", "thumbnail": "https://tvmegabrasil.com.br/wp-content/uploads/2024/10/cropped-12.png" }, { "title": "Tv Mais Maricá", "src": "https://5cf4a2c2512a2.streamlock.net/tvmaismarica/tvmaismarica/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-mais-marica.webp" }, { "title": "Bem Mais Tv", "src": "https://video09.logicahost.com.br/bemmaistv01/bemmaistv01/playlist.m3u8", "thumbnail": "https://s3minio.webativa.com.br/redeitv/thumb-bem-mais-tv.png" }, { "title": "Diário", "src": "https://netdiario.brasilstream.com.br/hls/netdiario/index.m3u8", "thumbnail": "https://netdiario.com.br/wp-content/uploads/2022/02/logo-1.png" }, { "title": "TV Santa Cecilia", "src": "https://60d88f8ce1206.streamlock.net/2063/2063/playlist.m3u8", "thumbnail": "https://santaportal.com.br/wp/wp-content/uploads/2021/05/20204262849389g.jpg" }, { "title": "Play TV", "src": "https://isaocorp.cloudecast.com/playtv/index.fmp4.m3u8", "thumbnail": "https://playtv.com.br/site/wp-content/uploads/2024/07/PlayTVHorizontal@500x.png" }, { "title": "Rede TVS", "src": "https://video01.kshost.com.br:4443/rede1250/rede1250/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/rede-tvs.webp" }, { "title": "Acesso", "src": "https://cdn.live.br1.jmvstream.com/webtv/tvacessochannel/playlist/playlist.m3u8", "thumbnail": "https://s3minio.webativa.com.br/redeitv/thumb-acesso.png" }, { "title": "RS Play", "src": "https://tv03.zas.media:1936/rsplay/rsplay/playlist.m3u8", "thumbnail": "https://s3minio.webativa.com.br/redeitv/thumb-rs-play.png" }, { "title": "Rede NGT", "src": "https://isaocorp.cloudecast.com/ngt/index.fmp4.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/rede-ngt.webp" }, { "title": "Unique", "src": "https://pop.uniquetv.com.br/uniquetv/video.m3u8", "thumbnail": "https://d14vd6r4ppsx57.cloudfront.net/media/brand/img/web/62/62_img_bg_image_293x165_small.jpg" }, { "title": "Sou [.tv]", "src": "https://vdo1.audiostream.com.br:3010/live/soutvlive.m3u8", "thumbnail": "https://d14vd6r4ppsx57.cloudfront.net/media/brand/img/web/139/139_img_bg_image_293x165_small.jpg" }, { "title": "VRT", "src": "https://sistemavrt2023.vrtchannel.tv.br:3626/hybrid/play.m3u8", "thumbnail": "https://d14vd6r4ppsx57.cloudfront.net/media/brand/img/web/69/69_img_bg_image_293x165_small.jpg" }, { "title": "Wording", "src": "https://tv02.zas.media:1936/wordingtv/wordingtv/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/wording.webp" } ],
    "Jornalismo": [ { "title": "Record News", "src": "https://run-rnw-rn.otteravision.com/rnw/rn/rnw_rn_720p_high.m3u8", "thumbnail": "https://www.recordamericas.com/wp-content/uploads/2024/06/logo-recordnews.png" }, { "title": "Record News ottera", "src": "https://stream.ads.ottera.tv/playlist.m3u8?network_id=2116", "thumbnail": "https://www.recordamericas.com/wp-content/uploads/2024/06/logo-recordnews.png" }, { "title": "CNN Brasil", "src": "https://video01.soultv.com.br/cnnbrasil/cnnbrasil/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/cnn-brasil.webp" }, { "title": "24h News", "src": "https://origin-nxtv.b-cdn.net/24H_NEWS/tracks-v1a1/mono.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/24h-news.webp" }, { "title": "Band News", "src": "https://hplay.tv/augetv/12396547488/1300.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/band-news.webp" }, { "title": "SIC Notícias", "src": "https://d277k9d1h9dro4.cloudfront.net/out/v1/293e7c3464824cbd8818ab8e49dc5fe9/index.m3u8", "thumbnail": "https://s3minio.webativa.com.br/redeitv/thumb-sic-noticias.png" } ],
    "Religiosos": [ { "title": "Oasis", "src": "https://stmv5.samcast.com.br/oasistv/oasistv/playlist.m3u8", "thumbnail": "https://oasistv.com.br/imagens/logosite.png" }, { "title": "Rede Vida", "src": "https://d12e4o88jd8gex.cloudfront.net/out/v1/cea3de0b76ac4e82ab8ee0fd3f17ce12/index.m3u8", "thumbnail": "https://redevida.com.br/wp-content/uploads/2024/07/logo-redevida.png.webp" }, { "title": "Tv Aparecida", "src": "https://cdn.live.br1.jmvstream.com/w/LVW-9716/LVW9716_HbtQtezcaw/playlist.m3u8", "thumbnail": "https://upload.wikimedia.org/wikipedia/pt/1/1e/Logotipo_da_TV_Aparecida.png" }, { "title": "Tv Pai Eterno", "src": "https://video09.logicahost.com.br/paieterno/paieterno/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/tv-pai-eterno.webp" }, { "title": "Vivax Tv", "src": "https://stmv2.samcast.com.br/marcus8647/marcus8647/playlist.m3u8", "thumbnail": "https://static.wixstatic.com/media/9b4759_2455541c839e4dc6972ff9234d2ef2bf~mv2.png" }, { "title": "Rede Gospel", "src": "https://cdn.live.br1.jmvstream.com/w/LVW-8719/LVW8719_AcLVAxWy5J/playlist.m3u8", "thumbnail": "https://upload.wikimedia.org/wikipedia/pt/thumb/b/ba/LGT_Rede_Gospel.png/250px-LGT_Rede_Gospel.png" }, { "title": "Tv Life América", "src": "https://streaming.cloudecast.com/hls/tvlifeamerica/index.m3u8", "thumbnail": "https://s3minio.webativa.com.br/redeitv/thumb-tv-life-america.png" }, { "title": "Rede Universo Tv", "src": "https://srv5.zcast.com.br/universotv/universotv/playlist.m3u8", "thumbnail": "https://pa-str.srvsite.com/arquivos/7032/cabecalho-7032-20241028161430.png" }, { "title": "Rede Mais Família", "src": "https://video09.logicahost.com.br/redefamilia/redefamilia/playlist.m3u8", "thumbnail": "https://d14vd6r4ppsx57.cloudfront.net/media/brand/Logotipo_100x100_vdONDb3.png" }, { "title": "Gospel Music", "src": "https://stmv1.srvif.com/gmusic/gmusic/playlist.m3u8", "thumbnail": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh6rkHnWxPl0unrUZcIVPhyphenhyphenMg1ql9mahJcBFY8cqaUtWWsiXfyaMOD1MaHpn5buvzDlZMfVe-Y1zsTbX7AvgLGOXcyfhhkt8fLWJTCRbQfQjRb-i2lvPQakcIz1fB4fmlXRuHYpI2XOrQSjH3O0klLi-ElvGTVKIeLIJYEIYMFAXKU5WmfB-MVA1_7Vez4/s300/GOSPEL%20MUSIC%20TELEVISION.webp" }, { "title": "Gospel Movies", "src": "https://stmv1.srvif.com/gospelf/gospelf/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/gospel-movie-tv.webp" }, { "title": "Gospel Cartoon", "src": "https://stmv1.srvif.com/gospelcartoon/gospelcartoon/playlist.m3u8", "thumbnail": "https://img.vidks.net/v2x/l/gospel-cartoon.webp" } ],
};

const VortexApp = {
    elements: {
        mainContent: document.getElementById('mainContent'), searchInput: document.getElementById('searchInput'),
        modal: document.getElementById('playerModal'), videoPlayer: document.getElementById('videoPlayer'),
        playerTitle: document.getElementById('playerTitle'), closePlayerBtn: document.getElementById('closePlayer'),
        noResultsDiv: document.getElementById('noResults'), heroSection: document.getElementById('hero-section'),
        filterNav: document.getElementById('filter-nav'), pipButton: document.getElementById('pipButton'),
        channelOverlay: document.getElementById('channelOverlay'),
        channelList: document.getElementById('channelList'),
    },
    state: {
        hls: null,
        currentChannelIndex: -1,
        hideOverlayTimeout: null,
    },
    init() {
        this.buildInitialDOM();
        this.attachListeners();
    },
    buildInitialDOM() {
        this.elements.searchInput.setAttribute('tabindex', '0');
        this.elements.heroSection.setAttribute('tabindex', '0');
        const featured = channelsData["Tv Aberta"]?.[1] || Object.values(channelsData).flat()[0];
        this.elements.heroSection.dataset.src = featured.src;
        this.elements.heroSection.dataset.title = featured.title;
        this.elements.heroSection.innerHTML = `
            <video id="heroVideo" autoplay muted loop playsinline></video>
            <div class="hero-content">
                <h2 class="hero-title">${featured.title}</h2>
                <div class="hero-play-btn">Assistir Agora</div>
            </div>`;
        const heroVideo = document.getElementById('heroVideo');
        if (Hls.isSupported()) {
            const hlsHero = new Hls();
            hlsHero.loadSource(featured.src);
            hlsHero.attachMedia(heroVideo);
        } else if (heroVideo.canPlayType('application/vnd.apple.mpegurl')) {
            heroVideo.src = featured.src;
        }
        const categories = ['Todos', ...Object.keys(channelsData)];
        this.elements.filterNav.innerHTML = categories.map(cat => `<button class="filter-btn" tabindex="0" data-category="${cat}">${cat}</button>`).join('');
        this.elements.filterNav.querySelector('.filter-btn').classList.add('active');
        for (const category in channelsData) {
            const section = document.createElement('section');
            section.className = 'carousel';
            section.dataset.category = category;
            section.innerHTML = `<h2 class="section-title">${category}</h2><div class="wrap-row"></div>`;
            const wrapRow = section.querySelector('.wrap-row');
            wrapRow.innerHTML = channelsData[category].map(channel => `<div class="channel-card" tabindex="0" data-src="${channel.src}" data-title="${channel.title}"><div class="channel-thumb"><img src="${channel.thumbnail}" alt="${channel.title}" loading="lazy"></div><div class="channel-info"><div class="channel-name">${channel.title}</div></div></div>`).join('');
            this.elements.mainContent.appendChild(section);
        }
    },
    updateView() {
        const query = this.elements.searchInput.value.toLowerCase().trim();
        const activeFilter = this.elements.filterNav.querySelector('.active').dataset.category;
        document.querySelectorAll('.carousel').forEach(carousel => {
            let visibleChannelsInCategory = 0;
            const category = carousel.dataset.category;
            carousel.querySelectorAll('.channel-card').forEach(card => {
                const title = card.dataset.title.toLowerCase();
                const matchesSearch = title.includes(query);
                const matchesFilter = (activeFilter === 'Todos' || activeFilter === category);
                const isVisible = matchesSearch && matchesFilter;
                card.classList.toggle('hidden', !isVisible);
                if (isVisible) visibleChannelsInCategory++;
            });
            carousel.classList.toggle('hidden', visibleChannelsInCategory === 0);
        });
        this.elements.noResultsDiv.classList.toggle('hidden', !this.elements.mainContent.querySelector('.channel-card:not(.hidden)'));
    },
    attachListeners() {
        document.body.addEventListener('click', e => {
            const card = e.target.closest('.channel-card, #hero-section');
            if (card) {
                const allChannels = Object.values(channelsData).flat();
                this.state.currentChannelIndex = allChannels.findIndex(c => c.src === card.dataset.src);
                this.openPlayer(card.dataset.src, card.dataset.title);
            }
            const filter = e.target.closest('.filter-btn');
            if (filter) {
                this.elements.filterNav.querySelector('.active').classList.remove('active');
                filter.classList.add('active');
                this.updateView();
            }
        });
        this.elements.searchInput.addEventListener('input', () => this.updateView());
        this.elements.closePlayerBtn.addEventListener('click', () => this.closePlayer());
        this.elements.pipButton.addEventListener('click', () => this.togglePiP());

        document.addEventListener('keydown', e => {
            if (this.elements.modal.classList.contains('open')) {
                this.handlePlayerKeys(e);
                return;
            }
            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                e.preventDefault();
                this.handleSpatialNavigation(e.key);
            }
            if (e.key === 'Enter') {
                e.preventDefault();
                if (document.activeElement && typeof document.activeElement.click === 'function') {
                    document.activeElement.click();
                }
            }
        });
    },

    // ===== FUNÇÃO DE NAVEGAÇÃO ESPACIAL - VERSÃO 3 (MAIS INTELIGENTE) =====
    handleSpatialNavigation(key) {
        const focusableElements = Array.from(document.querySelectorAll('[tabindex="0"]')).filter(el => el.offsetParent !== null && !el.classList.contains('hidden'));
        if (focusableElements.length === 0) return;

        const currentElement = document.activeElement;
        const currentIndex = focusableElements.indexOf(currentElement);

        if (currentIndex === -1) {
            focusableElements[0].focus();
            focusableElements[0].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' });
            return;
        }

        const currentRect = currentElement.getBoundingClientRect();
        let bestCandidate = null;
        let minDistance = Infinity;

        for (const candidate of focusableElements) {
            if (candidate === currentElement) continue;

            const candidateRect = candidate.getBoundingClientRect();
            
            // Verifica se há sobreposição nos eixos para qualificar um candidato
            const isVerticalOverlap = candidateRect.right > currentRect.left && candidateRect.left < currentRect.right;
            const isHorizontalOverlap = candidateRect.bottom > currentRect.top && candidateRect.top < currentRect.bottom;
            
            const dx = (candidateRect.left + candidateRect.width / 2) - (currentRect.left + currentRect.width / 2);
            const dy = (candidateRect.top + candidateRect.height / 2) - (currentRect.top + currentRect.height / 2);

            let distance = Infinity;

            switch (key) {
                case 'ArrowDown':
                    // SÓ CONSIDERA se o candidato estiver abaixo E na mesma coluna vertical
                    if (dy > 0 && isVerticalOverlap) {
                        distance = dy; // A distância principal é a vertical
                    }
                    break;
                case 'ArrowUp':
                    // SÓ CONSIDERA se o candidato estiver acima E na mesma coluna vertical
                    if (dy < 0 && isVerticalOverlap) {
                        distance = Math.abs(dy);
                    }
                    break;
                case 'ArrowRight':
                    // SÓ CONSIDERA se o candidato estiver à direita E na mesma faixa horizontal
                    if (dx > 0 && isHorizontalOverlap) {
                        distance = dx; // A distância principal é a horizontal
                    }
                    break;
                case 'ArrowLeft':
                    // SÓ CONSIDERA se o candidato estiver à esquerda E na mesma faixa horizontal
                    if (dx < 0 && isHorizontalOverlap) {
                        distance = Math.abs(dx);
                    }
                    break;
            }

            if (distance < minDistance) {
                minDistance = distance;
                bestCandidate = candidate;
            }
        }

        if (bestCandidate) {
            bestCandidate.focus();
            bestCandidate.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' });
        }
    },
    
    renderChannelOverlay() {
        const allChannels = Object.values(channelsData).flat();
        this.elements.channelList.innerHTML = allChannels.map((channel, index) => `
            <div class="overlay-card ${index === this.state.currentChannelIndex ? 'active' : ''}" 
                 data-index="${index}" tabindex="${index === this.state.currentChannelIndex ? '0' : '-1'}" role="button">
                <img src="${channel.thumbnail}" alt="">
                <div class="name">${channel.title}</div>
            </div>
        `).join('');
        this.elements.channelList.addEventListener('click', (e) => {
            const card = e.target.closest('.overlay-card');
            if (card) { this.changeChannel(parseInt(card.dataset.index)); }
        });
    },
    showPlayerOverlay() {
        this.elements.channelOverlay.classList.add('visible');
        const activeCard = this.elements.channelList.querySelector(`[data-index="${this.state.currentChannelIndex}"]`);
        if (activeCard) {
            activeCard.focus();
            activeCard.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }
        clearTimeout(this.state.hideOverlayTimeout);
        this.state.hideOverlayTimeout = setTimeout(() => {
            this.elements.channelOverlay.classList.remove('visible');
        }, 5000);
    },
    openPlayer(src, title) {
        this.elements.modal.classList.add('open');
        this.elements.modal.setAttribute('aria-hidden', 'false');
        this.elements.playerTitle.textContent = title;
        this.renderChannelOverlay();
        this.loadAndPlay(src);
    },
    closePlayer() {
        this.elements.modal.classList.remove('open');
        this.elements.modal.setAttribute('aria-hidden', 'true');
        this.elements.channelOverlay.classList.remove('visible');
        clearTimeout(this.state.hideOverlayTimeout);
        if (this.state.hls) { this.state.hls.destroy(); this.state.hls = null; }
        this.elements.videoPlayer.pause();
        this.elements.videoPlayer.removeAttribute('src');
        this.elements.videoPlayer.load();
    },
    loadAndPlay(src) {
        const video = this.elements.videoPlayer;
        if (this.state.hls) { this.state.hls.destroy(); }
        if (Hls.isSupported()) {
            this.state.hls = new Hls();
            this.state.hls.loadSource(src);
            this.state.hls.attachMedia(video);
            this.state.hls.on(Hls.Events.MANIFEST_PARSED, () => {
                video.play().catch(error => console.error("Erro no autoplay:", error));
            });
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = src;
            video.play().catch(error => console.error("Erro no autoplay nativo:", error));
        }
    },
    changeChannel(index) {
        const allChannels = Object.values(channelsData).flat();
        if (index >= 0 && index < allChannels.length) {
            const newChannel = allChannels[index];
            this.state.currentChannelIndex = index;
            this.loadAndPlay(newChannel.src);
            this.elements.playerTitle.textContent = newChannel.title;
            const oldActiveCard = this.elements.channelList.querySelector('.overlay-card.active');
            if (oldActiveCard) oldActiveCard.classList.remove('active');
            const newActiveCard = this.elements.channelList.querySelector(`[data-index="${index}"]`);
            if (newActiveCard) newActiveCard.classList.add('active');
            if (this.elements.channelOverlay.classList.contains('visible')) {
                this.showPlayerOverlay();
            }
        }
    },
    togglePiP() {
        if (document.pictureInPictureElement) {
            document.exitPictureInPicture().catch(e => console.error("Erro ao sair do PiP:", e));
        } else {
            this.elements.videoPlayer.requestPictureInPicture().catch(e => console.error("Erro ao entrar em PiP:", e));
        }
    },
    handlePlayerKeys(e) {
        if (!this.elements.channelOverlay.classList.contains('visible')) {
            this.showPlayerOverlay();
        } else {
            clearTimeout(this.state.hideOverlayTimeout);
            this.state.hideOverlayTimeout = setTimeout(() => {
                this.elements.channelOverlay.classList.remove('visible');
            }, 5000);
        }
        switch(e.key) {
            case 'Escape': case 'Backspace':
                e.preventDefault(); this.closePlayer(); break;
            case 'ArrowUp':
                e.preventDefault(); this.changeChannel(this.state.currentChannelIndex - 1); break;
            case 'ArrowDown':
                e.preventDefault(); this.changeChannel(this.state.currentChannelIndex + 1); break;
            case 'ArrowLeft': case 'ArrowRight': {
                e.preventDefault();
                const items = Array.from(this.elements.channelList.querySelectorAll('.overlay-card'));
                if (!items.length) break;
                const currentFocused = document.activeElement;
                const currentIndex = items.indexOf(currentFocused);
                let nextIndex = currentIndex + (e.key === 'ArrowRight' ? 1 : -1);
                nextIndex = Math.max(0, Math.min(items.length - 1, nextIndex));
                if (nextIndex !== currentIndex) {
                    items[currentIndex].setAttribute('tabindex', '-1');
                    const nextItem = items[nextIndex];
                    nextItem.setAttribute('tabindex', '0');
                    nextItem.focus();
                }
                break;
            }
            case 'Enter':
                if (document.activeElement.classList.contains('overlay-card')) {
                    this.changeChannel(parseInt(document.activeElement.dataset.index));
                }
                break;
        }
    },
};document.addEventListener('DOMContentLoaded', () => VortexApp.init());
</script>
</body>
</html>




